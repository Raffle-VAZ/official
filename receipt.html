<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <input type="file" id="fileInput" accept="image/*,application/pdf" hidden>
    <button onclick="document.getElementById('fileInput').click()">Выбрать файл</button>
    <span id="fileName"></span>
    <button id="sendBtn" disabled>Отправить в бота</button>

    <script>
        const tg = window.Telegram.WebApp;
        const fileInput = document.getElementById('fileInput');
        const sendBtn = document.getElementById('sendBtn');

        // Обработчик выбора файла
        fileInput.addEventListener('change', function() {
            const file = this.files[0];
            if (!file) return;

            // Проверки файла
            if (!['image/jpeg', 'image/png', 'application/pdf'].includes(file.type)) {
                tg.showAlert('Только JPG, PNG или PDF');
                return;
            }

            if (file.size > 5 * 1024 * 1024) {
                tg.showAlert('Макс. размер 5MB');
                return;
            }

            document.getElementById('fileName').textContent = file.name;
            sendBtn.disabled = false;
        });

        // Отправка файла
        sendBtn.addEventListener('click', () => {
            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = () => {
                tg.sendData(JSON.stringify({
                    file_name: file.name,
                    mime_type: file.type,
                    data: reader.result.split(',')[1]
                }));
                tg.close();
            };

            reader.readAsDataURL(file);
        });
    </script>
</body>
</html>